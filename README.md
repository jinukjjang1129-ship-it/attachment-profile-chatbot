### 배포 링크 https://attachment-profile-chatbot-qqd6sxueqytzalxsrwghba.streamlit.app/
### 비밀번호: jinukjjang1@naver.com 메일 보내주세요!

# 사랑의 이해  
RAG 기반 개인 맞춤 연애 상담 챗봇 (Streamlit)

본 프로젝트는 설문을 통해 사용자의 연애 성향과 감정 상태를 정량화하고,  
유형·상태·위험 수준에 따라 상담 응답을 다르게 생성하는  
RAG(Retrieval-Augmented Generation) 기반 연애 상담 챗봇입니다.

개인 프로젝트/팀 프로젝트로 진행되었으며,  
모델 설계부터 Streamlit Cloud 배포까지의 전체 과정을 경험하는 것을 목표로 했습니다. :contentReference[oaicite:0]{index=0}

---

## 1. 프로젝트 배경 및 문제 정의

연애 고민은 매우 사적이고 개인의 감정이 깊게 개입되는 영역으로,  
상황이 반복되더라도 맥락이 매번 달라 명확한 정답을 제시하기 어렵습니다.

기존 연애 상담 서비스나 챗봇은  
- 개인의 성향·관계 패턴·감정 상태를 충분히 반영하지 못하고  
- 동일한 상황에 대해 일률적인 조언을 제공하는 한계가 있습니다.

또한 실제 커플 상담의 경우 비용, 접근성, 이용 편의성 문제로  
상담을 중단하는 비율도 적지 않습니다.

이러한 한계를 보완하기 위해,  
**개인 성향을 구조적으로 반영하고 상황·위험 수준에 따라 응답이 달라지는  
개인 맞춤형 상담 시스템**을 목표로 본 프로젝트를 기획했습니다. :contentReference[oaicite:1]{index=1}

---

## 2. 전체 시스템 흐름

본 챗봇은 다음과 같은 흐름으로 동작합니다.

1. 연애 성향 진단 설문 진행  
2. 설문 결과를 기반으로 사용자 성향 점수화  
3. 4개 축을 조합한 16가지 연애 유형 분류  
4. 상담 목적 및 사용자 상태에 따른 상담자 페르소나 선택  
5. VectorDB 기반 의미 검색(RAG)  
6. 상담 응답 생성  
7. 상담 종료 시 요약 및 사용자 상태 점수 업데이트  

상담이 반복될수록 사용자의 상태 변화가 누적되어  
다음 상담에 반영되는 구조입니다. :contentReference[oaicite:2]{index=2}

---

## 3. 사용자 진단 및 유형 분류

사용자 진단은 다음 네 가지 축을 기준으로 진행됩니다.

- 자기 모형(Self Model): 자기 긍정 / 자기 부정  
- 타인 모형(Other Model): 타인 긍정 / 타인 부정  
- 감정 조절 전략(ERQ): 억제 / 재평가  
- 자기 효능감: 고효능 / 저효능  

각 축을 점수화하여 조합함으로써  
총 **16가지 연애 성향 유형**으로 분류합니다.

진단 결과는 시각화된 형태로 제공되어,  
사용자가 자신의 감정 상태와 연애 성향을 보다 객관적으로 인식할 수 있도록 설계했습니다. :contentReference[oaicite:3]{index=3}

---

## 4. RAG(VectorDB) 설계

본 프로젝트에서는 단순 질의응답을 넘어서기 위해  
VectorDB 기반 RAG 구조를 사용했습니다.

### 상담 전 DB
- 성향 분류 기준 설명 문서
- 유형별 특징 설명 문서
- 상담자가 참고하는 기본 가이드

### 상담 도중 DB
- 갈등 유형별 대응 가이드
- 위험 신호(Level)별 단계적 대응 매뉴얼

사용자의 발화, 연애 유형, 현재 상태 점수 등을 입력으로 받아  
상황에 맞는 문서가 검색되고, 이를 기반으로 답변이 생성됩니다. :contentReference[oaicite:4]{index=4}

---

## 5. 차별적 설계 포인트

- 동일한 질문이라도 **사용자 유형에 따라 서로 다른 상담 응답 생성**
- 단순 금지어 필터가 아닌,  
  **위험 수준(Level)에 따른 단계적 대응 매뉴얼**을 VectorDB에서 호출
- 상담 종료 시 대화 요약을 생성하고,  
  요약 내용을 기반으로 사용자 상태 점수를 업데이트
- 다음 상담에서 이전 맥락을 활용할 수 있도록 구조 설계

이를 통해 단순한 챗봇이 아닌,  
**상담 흐름과 맥락을 고려하는 AI 상담 시스템**을 구현하고자 했습니다. :contentReference[oaicite:5]{index=5}

---

## 6. 실행 및 배포 메모

- Streamlit 기반으로 UI 구현
- OpenAI API 사용 (환경 변수로 관리)
- VectorDB는 최초 실행 시 ingest 스크립트를 통해 생성 필요
- Streamlit Cloud 배포 과정에서  
  persist directory 및 환경 변수 설정 이슈를 경험하며 해결

본 레포지토리는 실제 배포 가능한 구조를 유지하고 있습니다.

---

## 7. 기대 효과

- 막연한 감정과 고민을 데이터 기반으로 정리하여 자기 이해를 도움
- AI 상담을 통해 감정을 한 템포 늦추고 상황을 재해석하는 경험 제공
- 가스라이팅, 데이트 폭력 등 위험 징후를 조기에 감지
- 비용과 시간 제약이 적은 상담 보조 수단으로 활용 가능

---

## 8. 향후 개선 방향

- 누적 상담 데이터를 활용한 진단 로직 고도화
- 최신 연애 트렌드를 반영한 VectorDB 확장
- 커플 연동 모드 및 궁합 리포트 기능
- 장기 기억 구조(LangGraph 등) 도입
- 전문가 상담 연계 및 편향성 탐지 기능 강화

---

본 프로젝트는  
**개인 맞춤형 상담 구조 설계와 RAG 기반 시스템 구현 경험을 정리하기 위한 기록용 프로젝트**입니다.
